
### **移动端操作方式设计文档**

#### **1. 核心设计原则**

*   **触控优先：** 所有交互都以手指触控为基准，摒弃鼠标悬停、右键等PC概念。
* **简化精确操作：** 通过智能判定和UI辅助，降低微操门槛。
* **信息清晰：** 在小屏幕上确保关键信息（资源、电力、单位状态）一目了然。
* **流畅与响应：** 操作反馈必须即时、清晰，避免误触。

#### **2. 核心操作方案**

##### **2.1 基础控制（镜头与视角）**

*   **镜头移动：**
    *   **拖拽：** 单指在屏幕空白处拖拽来移动镜头。最符合直觉，节省UI空间。

*   **镜头缩放：**
    *   **双指捏合**进行缩放。这是移动端标准操作，无需解释。

##### **2.2 单位选择与控制**

*   **单选：** 直接点击一个单位即可选中。
*   **框选：**
    *   在屏幕**空白处**长按并拖拽，出现一个半透明的矩形框。
    *   释放手指后，矩形框内的所有**同类单位**将被选中。
    *   **优化：** 框选优先级：战斗单位 > 工人单位（矿车）> 建筑。

*   **多选/编队：**
    *   **双击单位：** 双击一个单位，可选中屏幕内所有同类型单位。
    *   **编队功能：**
        1.  选中单位后，屏幕下方会出现一个 **“编队”按钮**。
        2.  点击后，出现1-5的数字编队槽。
        3.  点击一个数字（如“1”），将这些单位编入第1队。
        4.  之后，**快速双击**屏幕任意位置的数字“1”，即可随时选中该编队。
    *   **长按编队图标：** 长按编队数字图标可以查看编队内单位的大概信息和状态。

*   **单位指令：**
    *   **移动：** 选中单位后，**点击**目标地点。出现一个绿色的箭头或脚印特效作为反馈。
    *   **攻击：** 选中单位后，使用屏幕下方的 **“攻击”按钮**，然后点击目标单位或地点。攻击按钮会高亮，提示当前处于攻击指令模式。
    *   **强制攻击（拆建筑）：** 长按“攻击”按钮，会展开一个次级菜单，选择“强制攻击”或“攻击地面”。
    *   **停止：** 屏幕下方提供明确的 **“停止”按钮**。
    *   **巡逻：** 长按“移动”按钮或从次级菜单中选择“巡逻”。

##### **2.3 建筑管理与生产**

*   **建筑选择与信息：**
    *   直接点击建筑即可选中。
    *   选中后，屏幕底部会立即变为该建筑的**命令面板**。
    *   **快捷菜单：** 在建筑上**长按**，可以快速弹出一个小型径向菜单或列表菜单，显示最常用的指令（如“生产矿车”、“设置集结地”），无需完全打开详细面板。

*   **建筑建造：**
    1.  点击**建造厂**。
    2.  底部命令面板显示所有可建造的建筑图标。
    3.  点击一个建筑图标（如“发电厂”），镜头会自动拉高，并出现一个建筑的“幽灵”轮廓。
    4.  拖动轮廓到地图上有效位置（绿色代表可放置，红色代表不可放置）。
    5.  点击屏幕任意位置确认放置，或点击旁边的“X”取消。

*   **单位生产：**
    1.  点击**兵营**或**战车工厂**。
    2.  底部命令面板显示所有可生产的单位图标及队列。
    3.  点击单位图标一次，即可将其加入生产队列。
    4.  点击队列中正在生产或等待的单位，可以**取消生产**并返还部分资金。
    5.   **批量生产：** 双击单位图标，可一次性加入3个该单位到生产队列（数量可配置）。

*   **设置集结地：**
    *   选中兵营/战车工厂后，命令面板上有一个“集结地”按钮。
    *   点击后，会出现一个旗帜图标，将其拖动到地图上期望的位置即可。

#### **3. 移动端专属UI布局**

```
---------------------------------
| 小地图 |  资金: $1000  |  电力: 150/200 |
---------------------------------
|                                   |
|          (主游戏区域)             |
|                                   |
|                                   |
---------------------------------
| [编队1][编队2]...[编队5] | 菜单 |
---------------------------------
| [移动] [停止] [攻击] [技能] ...   |
| [单位图标] [单位图标] [队列...]   |
---------------------------------
```

*   **顶部栏：**
    *   左侧：**小地图**。可点击跳转视角，支持 pinch 缩放。
    *   中间：核心资源信息（**资金**、**电力**）。电力不足时数字会变红并闪烁。
*   **底部栏：**
    *   **上层：** 编队按钮（1-5）和全局菜单按钮（设置、退出、存档）。
    *   **下层：** 动态命令面板。根据所选目标变化。
        *   未选中任何东西：显示常用建筑（建造厂、兵营等）的快捷建造按钮。
        *   选中单位：显示移动、停止、攻击等指令。
        *   选中建筑：显示可生产单位或可建造建筑。
*   **上下文智能按钮：**
    *   当选中战斗单位且附近有敌人时，在单位头顶或屏幕一侧出现一个醒目的 **“集火攻击”按钮**，方便快速集火。

#### **4. 辅助功能与优化**

*   **智能施法：** 单位的特殊技能（如果后续添加）采用“点击技能图标 -> 自动朝最合理目标或区域释放”的逻辑，减少手动瞄准。
*   **操作优先级：** 系统会自动判定操作意图。例如，点击一个远处单位，优先判定为移动指令；点击一个近处敌方单位，优先判定为攻击指令。
*   **滑动建造/生产：** 对于高频操作（如暴兵），可以在单位图标上快速上下滑动来连续增加/移除生产队列。
*   **3D Touch/Haptic Feedback（可选）：**
    *   重按单位可以查看其详细属性。
    *   在进行重要操作（如建筑放置完成、单位生产完成）时提供震动反馈。

#### **5. 与传统PC操作的对比优势**

| 操作 | PC方式 | 移动端优化方式 | 优势 |
| :--- | :--- | :--- | :--- |
| **移动镜头** | 鼠标移至屏幕边缘 | 单指拖拽 | 操作区域大，不易误触UI |
| **编队选择** | 键盘按数字键 | 双击编队数字图标 | 视觉化，无需记忆键盘 |
| **生产单位** | 点击建筑，按键盘快捷键 | 点击建筑，点击图标 | 无需记忆，学习成本低 |
| **集结点** | 右键点击 | 专门的“集结地”按钮拖动 | 指令明确，避免与移动指令混淆 |

通过这套设计，我们成功地将复杂的RTS操作简化为以触控为核心、UI为辅助的直观流程，既保留了《红警》核心循环的策略深度，又完美适配了移动设备的交互特性。