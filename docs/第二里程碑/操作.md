# 手机端操作方案设计

## 📱 核心设计原则
- **触屏友好**：避免复杂手势，操作直观简单
- **界面简洁**：重要信息清晰，按钮大小适中
- **操作流畅**：减少操作步骤，提升响应速度

---

## 🏗️ 建造操作方案

### 1. 建造入口
```
[屏幕右下角固定建造按钮]
点击后弹出建筑菜单：
[发电厂] [采矿场] [坦克工厂]
```

### 2. 建筑放置流程
1. **选择建筑**：点击建筑图标
2. **预览放置**：
   - 半透明建筑模型跟随手指
   - 绿色=可建造，红色=不可建造
   - 自动吸附到网格或合适位置
3. **确认建造**：点击确认按钮或双击放置
4. **取消建造**：点击取消或屏幕空白处

### 3. 建造限制提示
- **资金不足**：图标变灰，显示所需资金
- **电力不足**：显示当前电力/所需电力
- **位置无效**：红色高亮，提示原因（如：需要资源点）

---

## 🎯 单位选择方案

### 1. 单选操作
- **点击选择**：直接点击单位选中
- **选中效果**：单位高亮+脚下圆圈指示

### 2. 多选操作
#### 方案A：框选（推荐）
```
[左下角固定"选择模式"按钮]
点击切换：移动模式 / 选择模式

选择模式下：
- 单指拖动绘制选择框
- 松开后选中框内所有单位
- 选择框半透明蓝色显示
```

#### 方案B：多重点选
```
[选中单位后，界面出现"添加选择"按钮]
点击其他单位时：
- 单独点击：替换选择
- 点击"添加选择"后点击：添加到当前选择
```

### 3. 选择组管理
```
[屏幕底部选择组快捷栏]
[1] [2] [3] [4]
长按单位组 → 分配到数字键
点击数字键 → 快速选择该组
```

---

## 🚀 移动操作方案

### 1. 基础移动
```
选中单位后：
- 点击地面：移动到指定位置
- 移动路径显示绿色箭头线
```

### 2. 高级移动功能
#### 路径点移动
```
长按移动按钮进入路径模式：
- 第一次点击：起点
- 后续点击：添加路径点
- 双击：结束路径设置
```

#### 阵型移动
```
[移动时底部阵型选择]
[线形] [扇形] [方形]
选择后单位保持阵型移动
```

### 3. 攻击移动
```
[屏幕底部"攻击移动"按钮]
点击后：
- 单位向目标点移动
- 途中遇到敌人自动攻击
- 移动路径显示红色
```

---

## 📐 界面布局设计

### 屏幕分区
```
┌─────────────────┬─────┐
│    小地图       │资源 │
├─────────────────┤信息 │
│                 │    │
│    游戏主视角    │    │
│                 │    │
│                 │    │
├─────┬─────┬─────┼─────┤
│生产 │建造 │单位 │功能 │
│按钮 │按钮 │信息 │按钮 │
└─────┴─────┴─────┴─────┘
```

### 具体布局
#### 左上角：信息区
- 小地图（可点击快速移动视角）
- 资源显示（资金、电力）

#### 右下角：操作区
```
固定按钮栏：
[建造] [生产] [单位技能] [设置]

选中单位时：
[移动] [停止] [攻击] [阵型]
```

#### 底部：状态区
- 选中单位头像和血量
- 当前选择数量
- 建造/生产队列

---

## ✋ 手势操作优化

### 视角控制
- **单指拖动**：移动摄像机
- **双指缩放**：缩放视角
- **双指旋转**：旋转视角（可选）

### 快捷操作
- **双击单位**：选中屏幕内同类型所有单位
- **长按单位/建筑**：显示详细信息浮窗
- **双指点击**：紧急停止所有单位

---

## 🎮 操作流程示例

### 完整建造流程
1. 点击右下角[建造]按钮
2. 点击[采矿场]图标（800💰）
3. 拖动半透明模型到资源点（变绿）
4. 点击✅确认建造
5. 显示建造进度条

### 完整战斗流程
1. 单指拖动框选4辆坦克
2. 点击底部[阵型]选择线形
3. 点击地图目标位置
4. 坦克保持阵型移动
5. 接近敌人后自动攻击

---

## ⚙️ 技术实现要点

### 输入处理层
```csharp
// 伪代码结构
public class MobileInputManager : MonoBehaviour
{
    void Update()
    {
        HandleTouchInput();
        HandleGestures();
        UpdateUIState();
    }
    
    void HandleTouchInput()
    {
        // 区分单击、长按、拖动
        // 判断触摸区域（UI还是游戏区域）
        // 分发到相应系统
    }
}
```

### 操作响应优化
- **触摸延迟**：减少操作反馈延迟
- **误触防止**：区分有意操作和无意滑动
- **按钮大小**：最小44x44像素（苹果规范）

---

## 📱 设备适配考虑

### 屏幕比例
- 16:9、18:9、19.5:9等全面屏适配
- 刘海屏、水滴屏安全区域

### 性能优化
- 触控事件合并处理
- 选择渲染使用GPU Instancing
- 移动预测和路径平滑

这个操作方案专门为手机触屏设计，既保持了RTS的操作深度，又充分考虑了移动端的操作习惯。需要我详细说明某个特定操作的代码实现吗？